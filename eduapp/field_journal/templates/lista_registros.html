{% extends 'base.html' %}
{% block content %}
    <link
    href="https://unpkg.com/gridjs/dist/theme/mermaid.min.css"
    rel="stylesheet"
    />
    <h1>Lista de Registros Diarios</h1>

    <!-- Formulario de filtro -->
    <form method="GET">
        <label for="fecha_filtro">Filtrar por Fecha:</label>
        <select name="fecha_filtro" id="fecha_filtro">
            <option value="">Todas las fechas</option>
            {% for fecha in fechas %}
                <option value="{{ fecha|date:'Y-m-d' }}">{{ fecha|date:'Y-m-d' }}</option>
            {% endfor %}
        </select>
        <label for="empleado_filtro">Filtrar por Empleado:</label>
        <select name="empleado_filtro" id="empleado_filtro">
            <option value="">Todos los empleados</option>
            {% for empleado in empleados %}
                <option value="{{ empleado }}">{{ empleado }}</option>
            {% endfor %}
        </select>
        <button type="submit">Filtrar</button>
    </form>
    <div id="w"></div>

    <script src="https://unpkg.com/gridjs/dist/gridjs.umd.js"></script>
    <script>
        var registrosDjango = {{ registros|safe }};
        console.log(registrosDjango);
        new gridjs.Grid({
            columns: ["id", "fecha", "empleado", "tiempo_suficiente", "actividades_interesantes", "material_agradable", "trabajo_fuera_aula", "involucrados", "atentos", "interrupciones", "influencias", "situacion_relevante"],
            data: registrosDjango,
            search: true,
            sort: true,
            pagination: true,
            resizable: true,
        }).render(document.getElementById("w"));
    </script>
{% endblock %}